# Created by Danny Tsang <danny@tsang.uk>
# Integration: https://www.home-assistant.io/integrations/webostv/
automation:
  # region Office TV
  - id: "1617814309728"
    alias: "Office: TV On"
    description: ""
    triggers:
      - trigger: state
        entity_id: media_player.office_tv
        from: "off"
        to: "on"
    conditions: []
    actions:
      - if:
          - condition: template
            value_template: "{{ state_attr('media_player.office_tv', 'source') != none }}"
        then:
          - action: script.send_to_home_log
            data:
              message:
                "ðŸ“º Office TV turned on and playing {{ state_attr('media_player.office_tv',
                'source') }}."
              log_level: "Normal"
        else:
          - action: script.send_to_home_log
            data:
              message: "ðŸ“º Office TV turned on."
              log_level: "Debug"
    mode: queued
    max: 10
  - id: "1617814349289"
    alias: "Office: TV Off"
    description: ""
    triggers:
      - trigger: state
        entity_id: media_player.office_tv
        from: "on"
        to: "off"
    conditions: []
    actions:
      - action: script.send_to_home_log
        data:
          message: "ðŸ“º Office TV turned off."
          log_level: "Debug"
    mode: queued
    max: 10
  - id: "1617814753264"
    alias: "Office: TV Source Changes"
    description: ""
    triggers:
      - trigger: state
        entity_id: media_player.office_tv
        attribute: source
    conditions: []
    actions:
      - if:
          - condition: template
            value_template: "{{ state_attr('media_player.office_tv', 'source') != none }}"
        then:
          - action: script.send_to_home_log
            data:
              message:
                "ðŸ“º Office TV turned on and playing {{ state_attr('media_player.office_tv',
                'source') }}."
              log_level: "Normal"
        else:
          - action: script.send_to_home_log
            data:
              message: "ðŸ“º Office TV media changed."
              log_level: "Debug"
    mode: queued
    max: 10
  - id: "1753129971064"
    alias: "Office: TV On For Long Time"
    description: ""
    triggers:
      - trigger: state
        entity_id:
          - media_player.office_tv
        not_to: "off"
        for:
          hours: 4
          minutes: 0
          seconds: 0
    conditions: []
    actions:
      - action: script.send_direct_notification
        metadata: {}
        data:
          title: Office TV
          message: Has been on for 4 hours
          people:
            entity_id:
              - person.danny
    mode: single
