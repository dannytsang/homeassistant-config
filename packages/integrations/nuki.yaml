# Created by Danny Tsang <danny@tsang.uk>
script:
  # Front Door
  lock_front_door:
    alias: Lock Front Door
    sequence:
      - if:
          - condition: state
            entity_id: input_boolean.enable_front_door_lock_automations
            state: "on"
          - condition: state
            entity_id: input_boolean.enable_front_door_lock_automations
            state: "on"
        then:
          - choose:
              - conditions:
                  - condition: state
                    entity_id: binary_sensor.front_door
                    state: "on"
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: ":warning: Open and cannot:lock: Lock. :warning:"
                      title: ":warning: :door: Front Door :warning:"
                      log_level: "Normal"
              - conditions:
                  - condition: state
                    entity_id: lock.front_door
                    state: "unlocked"
                sequence:
                  - parallel:
                      - service: script.send_to_home_log
                        data:
                          message: ":lock: Locking."
                          title: ":door: Front Door"
                          log_level: "Normal"
                      - service: lock.lock
                        data: {}
                        target:
                          entity_id: lock.front_door
    mode: single
    icon: mdi:lock
  unlock_front_door:
    alias: Unlock Front Door
    sequence:
      - if:
          - condition: state
            entity_id: input_boolean.enable_front_door_lock_automations
            state: "on"
        then:
          - choose:
              - conditions:
                  - condition: state
                    entity_id: lock.front_door
                    state: "locked"
                sequence:
                  - parallel:
                      - service: script.send_to_home_log
                        data:
                          message: ":unlock: Unlocking."
                          title: ":door: Front Door"
                          log_level: "Normal"
                      - service: lock.unlock
                        data: {}
                        target:
                          entity_id: lock.front_door
    mode: single
    icon: mdi:lock
