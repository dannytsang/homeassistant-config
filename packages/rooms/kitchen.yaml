# Created by Danny Tsang <danny@tsang.uk>
automation:
  - id: "1583797341647"
    alias: "Kitchen: Turn Off Lights At Night"
    description: ""
    trigger:
      - at: "23:30:00"
        platform: time
    condition:
      - condition: state
        entity_id: light.kitchen_lights
        state: "on"
    action:
      - service: script.send_to_home_log
        data:
          message: >-
            :clock{{ now().strftime('%I') | int }}{% if now().minute | int > 25 and now().minute | int < 35 %}30{% else %}{% endif %}:
            Turning lights off"
          title: ":cook: Kitchen"
      - service: scene.turn_on
        target:
          entity_id: scene.kitchen_main_lights_off
        data:
          transition: 2
    mode: single
  - id: "1606652871369"
    alias: "Kitchen: No Motion"
    description: ""
    trigger:
      - platform: state
        from: "on"
        to: "off"
        for: 00:05:00
        entity_id: binary_sensor.kitchen_area_motion
        id: first_no_motion
      - platform: state
        from: "on"
        to: "off"
        for: 00:07:00
        entity_id: binary_sensor.kitchen_area_motion
        id: second_no_motion
    condition: []
    action:
      - parallel:
          - choose:
              - conditions:
                  - condition: time
                    after: "00:00:00"
                  - condition: sun
                    before: sunset
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after :city_sunrise: and before :city_sunset:.
                        Turning ambient lights off.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_side_lights_off
                    data:
                      transition: 2
              - conditions:
                  - and:
                      - condition: sun
                        after: sunset
                      - condition: time
                        before: "23:30:00"
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after :city_sunset: and before :clock1130:.
                        Dimming ambient :bulb: :low_brightness: lights.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_dim_side_lights
                    data:
                      transition: 2
              - conditions:
                  - condition: time
                    after: "23:30:00"
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after
                        :clock{{ now().strftime('%I') | int }}{% if now().minute | int > 25 and now().minute | int < 35 %}30{% else %}{% endif %}:.
                        Turning all lights off."
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_off
                    data:
                      transition: 2
            default: []
          - choose:
              - conditions:
                  - condition: time
                    after: "00:00:00"
                  - condition: sun
                    before: sunset
                  - condition: trigger
                    id: first_no_motion
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after :city_sunrise: and before :city_sunset:.
                        Turning main kitchen lights off.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_off
                    data:
                      transition: 2
              - conditions:
                  - and:
                      - condition: sun
                        after: sunset
                      - condition: time
                        before: "23:59:59"
                      - condition: trigger
                        id: first_no_motion
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after :city_sunset: and before :city_sunrise:.
                        :low_brightness: Dimming main :bulb: :low_brightness: lights.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_dim
              - conditions:
                  - and:
                      - condition: sun
                        after: sunset
                      - condition: time
                        before: "23:59:59"
                      - condition: trigger
                        id: second_no_motion
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :no_pedestrians: No motion after :city_sunset: and before :city_sunrise:.
                        Turning main lights off.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_off
                    data:
                      transition: 2
            default: []
    mode: single
  - id: "1606294735952"
    alias: "Kitchen: Turn Off Lights In The Morning"
    description: ""
    trigger:
      - platform: time
        at: 09:00:00
        id: weekend
      - platform: time
        at: 08:50:00
        id: weekday
    condition:
      - condition: time
        weekday:
          - sat
          - sun
      - condition: state
        entity_id: light.kitchen_lights
        state: "on"
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
    action:
      - parallel:
          - choose:
              - conditions:
                  - condition: time
                    weekday:
                      - mon
                      - tue
                      - wed
                      - thu
                      - fri
                  - condition: trigger
                    id: weekday
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :clock{{ now().strftime('%I') | int }}{% if now().minute | int > 25 and now().minute | int < 35 %}30{% else %}{% endif %}:
                        Turning main lights off.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_off
                    data:
                      transition: 2
              - conditions:
                  - condition: time
                    weekday:
                      - sat
                      - sun
                  - condition: trigger
                    id: weekend
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: ":clock{{ now().strftime('%H')}}: Turning main lights off."
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_main_lights_off
                    data:
                      transition: 2
            default: []
    mode: single
  - id: "1588197104336"
    alias: "Kitchen: Timed Turn On Lights (Dim)"
    description: ""
    trigger:
      - event: sunset
        platform: sun
      - platform: time
        at: 06:45:00
    condition:
      - and:
          - not:
              - condition: state
                entity_id: input_select.home_mode
                state: Guest
          - condition: state
            entity_id: group.adult_people
            state: home
    action:
      - parallel:
          - service: scene.turn_on
            target:
              entity_id: scene.kitchen_dim_side_lights
            data:
              transition: 2
          - data:
              message: >-
                :bulb:  At least one person is :house_with_garden: home.
                Dimming ambient :bulb: :low_brightness: lights.
              title: ":cook: Kitchen"
            service: script.send_to_home_log
    mode: single
  - id: "1606158191303"
    alias: "Kitchen: Motion Detected Table Lights Off"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
      - platform: state
        entity_id: binary_sensor.kitchen_light_trigger
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - condition: state
            entity_id: light.kitchen_left
            state: "off"
          - condition: state
            entity_id: light.kitchen_middle
            state: "off"
          - condition: state
            entity_id: light.kitchen_right
            state: "off"
    action:
      - parallel:
          - choose:
              - conditions:
                  - or:
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_light_level
                        below: input_number.kitchen_light_level_threshold
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_2_light_level
                        below: input_number.kitchen_light_level_2_threshold
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :paw_prints: Motion detected and it's dark
                        ({{ states('sensor.kitchen_motion_light_level') }}
                        & {{ states('sensor.kitchen_motion_2_light_level') }}
                        < {{ states('input_number.kitchen_light_level_threshold') }} &
                        {{ states('input_number.kitchen_light_level_2_threshold') }}
                        {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                        Turning table :bulb: :high_brightness: lights on.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_table_lights_on
            default:
              - service: script.send_to_home_log
                data:
                  message: >-
                    :paw_prints: Motion detected and it's not dark
                    ({{ states('sensor.kitchen_motion_light_level') }}
                    & {{ states('sensor.kitchen_motion_2_light_level') }}
                    < {{ states('input_number.kitchen_light_level_threshold') }} &
                    {{ states('input_number.kitchen_light_level_2_threshold') }}
                    {{ state_attr('sensor.kitchen_motion_light_level','unit_of_measurement') }}).
                  title: ":cook: Kitchen"
    mode: queued
    max: 10
  - id: "1606158191307"
    alias: "Kitchen: Motion Detected Table Lights On"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
      - platform: state
        entity_id: binary_sensor.kitchen_light_trigger
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - and:
              - condition: state
                entity_id: light.kitchen_left
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_left
                attribute: brightness
                below: 100
          - and:
              - condition: state
                entity_id: light.kitchen_middle
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_middle
                attribute: brightness
                below: 100
          - and:
              - condition: state
                entity_id: light.kitchen_right
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_right
                attribute: brightness
                below: 100
    action:
      - parallel:
          - choose:
              - conditions:
                  - or:
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_light_level
                        below: input_number.kitchen_light_level_threshold
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_2_light_level
                        below: input_number.kitchen_light_level_2_threshold
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :paw_prints: Motion detected and it's dark
                        ({{ states('sensor.kitchen_motion_light_level') }}
                        & {{ states('sensor.kitchen_motion_2_light_level') }}
                        {{ state_attr('sensor.kitchen_motion_light_level','unit_of_measurement') }}
                        < {{ states('input_number.kitchen_light_level_threshold') }} &
                        {{ states('input_number.kitchen_light_level_2_threshold') }}
                        {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                        Turning up table :bulb: :high_brightness: lights.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_table_lights_on
            default:
              - service: script.send_to_home_log
                data:
                  message: >-
                    :paw_prints: Motion detected and it's not dark
                    ({{ states('sensor.kitchen_motion_light_level') }}
                    & {{ states('sensor.kitchen_motion_2_light_level') }}
                    {{ state_attr('sensor.kitchen_motion_light_level','unit_of_measurement') }}
                    < {{ states('input_number.kitchen_light_level_threshold') }} &
                    {{ states('input_number.kitchen_light_level_2_threshold') }}
                    {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                    Leaving table :bulb: :low_brightness: lights on dim.
                  title: ":cook: Kitchen"
    mode: queued
    max: 10
  - id: "1606158191306"
    alias: "Kitchen: Motion Detected Cooker Lights Off"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
      - platform: state
        entity_id: binary_sensor.kitchen_light_trigger
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - condition: state
            entity_id: light.kitchen_left_2
            state: "off"
          - condition: state
            entity_id: light.kitchen_middle_2
            state: "off"
          - condition: state
            entity_id: light.kitchen_right_2
            state: "off"
    action:
      - parallel:
          - choose:
              - conditions:
                  - or:
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_light_level
                        below: input_number.kitchen_light_level_threshold
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_2_light_level
                        below: input_number.kitchen_light_level_2_threshold
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :paw_prints: Motion detected and it's dark
                        ({{ states('sensor.kitchen_motion_light_level') }} &
                        {{ states('sensor.kitchen_motion_2_light_level') }}
                        < {{ states('input_number.kitchen_light_level_threshold') }} &
                        {{ states('input_number.kitchen_light_level_2_threshold') }}
                        {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                        Turning kitchen cooker :bulb: :high_brightness: lights on.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_cooker_lights_on
            default:
              - service: script.send_to_home_log
                data:
                  message: >-
                    :paw_prints: Motion detected and it's not dark
                    ({{ states('sensor.kitchen_motion_light_level') }} &
                    {{ states('sensor.kitchen_motion_2_light_level') }}
                    < {{ states('input_number.kitchen_light_level_threshold') }} &
                    {{ states('input_number.kitchen_light_level_2_threshold') }}
                    {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                  title: ":cook: Kitchen"
    mode: queued
    max: 10
  - id: "1606158191309"
    alias: "Kitchen: Motion Detected Cooker Lights On"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
      - platform: state
        entity_id: binary_sensor.kitchen_light_trigger
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - and:
              - condition: state
                entity_id: light.kitchen_left_2
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_left_2
                attribute: brightness
                below: 100
          - and:
              - condition: state
                entity_id: light.kitchen_middle_2
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_middle_2
                attribute: brightness
                below: 100
          - and:
              - condition: state
                entity_id: light.kitchen_right_2
                state: "on"
              - condition: numeric_state
                entity_id: light.kitchen_right_2
                attribute: brightness
                below: 100
    action:
      - parallel:
          - choose:
              - conditions:
                  - or:
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_light_level
                        below: input_number.kitchen_light_level_threshold
                      - condition: numeric_state
                        entity_id: sensor.kitchen_motion_2_light_level
                        below: input_number.kitchen_light_level_2_threshold
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :paw_prints: Motion detected and it's dark
                        ({{ states('sensor.kitchen_motion_light_level') }} &
                        {{ states('sensor.kitchen_motion_2_light_level') }}
                        < {{ states('input_number.kitchen_light_level_threshold') }} &
                        {{ states('input_number.kitchen_light_level_2_threshold') }}
                        {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                        Turning up cooker :bulb: :high_brightness: lights.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_cooker_lights_on
            default:
              - service: script.send_to_home_log
                data:
                  message: >-
                    :paw_prints: Motion detected and not it's dark
                    ({{ states('sensor.kitchen_motion_light_level') }} &
                    {{ states('sensor.kitchen_motion_2_light_level') }}
                    < {{ states('input_number.kitchen_light_level_threshold') }} &
                    {{ states('input_number.kitchen_light_level_2_threshold') }}
                    {{ state_attr('input_number.kitchen_light_level_threshold','unit_of_measurement') }}).
                    Leaving cooker :bulb: :low_brightness: lights on dim.
                  title: ":cook: Kitchen"
    mode: queued
    max: 10
  - id: "1606158191304"
    alias: "Kitchen: Motion Detected Ambient Lights On"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - condition: state
            entity_id: light.kitchen_cabinet_light
            state: "on"
          - condition: state
            entity_id: light.kitchen_down_light
            state: "on"
          - condition: state
            entity_id: light.kitchen_drawers
            state: "on"
    action:
      - parallel:
          - choose:
              - conditions:
                  - or:
                      - condition: numeric_state
                        entity_id: light.kitchen_cabinet_light
                        attribute: brightness
                        below: "100"
                      - condition: numeric_state
                        entity_id: light.kitchen_down_light
                        attribute: brightness
                        below: "100"
                      - condition: numeric_state
                        entity_id: light.kitchen_drawers
                        attribute: brightness
                        below: "100"
                sequence:
                  - service: script.send_to_home_log
                    data:
                      message: >-
                        :paw_prints: Motion detected.
                        Turning up ambient :bulb: :high_brightness: lights.
                      title: ":cook: Kitchen"
                  - service: scene.turn_on
                    target:
                      entity_id: scene.kitchen_side_lights_on
            default: []
    mode: queued
    max: 10
  - id: "1606158191305"
    alias: "Kitchen: Motion Detected Ambient Lights Off"
    description: ""
    trigger:
      - platform: state
        entity_id: binary_sensor.kitchen_area_motion
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.enable_kitchen_motion_triggers
        state: "on"
      - or:
          - condition: state
            entity_id: light.kitchen_cabinet_light
            state: "off"
          - condition: state
            entity_id: light.kitchen_down_light
            state: "off"
          - condition: state
            entity_id: light.kitchen_drawers
            state: "off"
    action:
      - parallel:
          - service: script.send_to_home_log
            data:
              message: >-
                :paw_prints: Motion detected.
                Turning ambient :bulb: :high_brightness: lights on.
              title: ":cook: Kitchen"
          - service: scene.turn_on
            target:
              entity_id: scene.kitchen_side_lights_on
    mode: single
  - id: "1619356833117"
    alias: "Kitchen: Turn Off Coffee Machine"
    description: ""
    trigger:
      - platform: state
        entity_id: switch.coffee_machine
        from: "off"
        to: "on"
        for: 00:30:00
    condition:
      - condition: state
        entity_id: input_boolean.enable_coffee_machine_automations
        state: "on"
    action:
      - parallel:
          - service: script.send_to_home_log
            data:
              message: >-
                :coffee: Coffee machine has been on for 30 minutes.
                Turning off coffee machine.
              title: ":cook: Kitchen"
          - service: switch.turn_off
            target:
              entity_id: switch.coffee_machine
    mode: single
  # Fridge
  - id: "1595678795895"
    alias: "Kitchen: Fridge Door Open"
    description: ""
    trigger:
      - entity_id: binary_sensor.fridge_door
        from: "off"
        platform: state
        to: "on"
    condition: []
    action:
      - data:
          message: ":door: :snowflake: Fridge door opened."
          title: ":cook: Kitchen"
        service: script.send_to_home_log
    mode: single
  - id: "1595678900778"
    alias: "Kitchen: Fridge Door Closed"
    description: ""
    trigger:
      - entity_id: binary_sensor.fridge_door
        from: "on"
        platform: state
        to: "off"
    condition: []
    action:
      - data:
          message: ":snowflake: Fridge :door: door closed."
          title: ":cook: Kitchen"
        service: script.send_to_home_log
    mode: single
  - id: "1595679010793"
    alias: "Kitchen: Fridge Open For A Long Period Of Time"
    description: ""
    trigger:
      - entity_id: binary_sensor.fridge_door
        for: 00:04:00
        from: "off"
        platform: state
        to: "on"
    condition: []
    action:
      - service: script.send_to_home_log
        data:
          message: >-
            Fridge :door:door is open.
            Reloading Smartthings integration to see if the sensor lagged out."
          title: ":cook: Kitchen"
      - service: rest_command.reload_smartthings
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - if:
          - condition: state
            entity_id: binary_sensor.fridge_door
            state: "on"
        then:
          - parallel:
              - service: script.send_direct_notification
                data:
                  message: >-
                    :snowflake: Fridge :door: door is open has been open for more than 4 minutes!
                  title: ":warning: :cook: Kitchen :warning:"
    mode: single
  # Freezer
  - id: "1595678795896"
    alias: "Kitchen: Freezer Door Open"
    description: ""
    trigger:
      - entity_id: binary_sensor.freezer_door
        from: "off"
        platform: state
        to: "on"
    condition: []
    action:
      - data:
          message: ":snowflake: Freezer :door: door opened."
          title: ":cook: Kitchen"
        service: script.send_to_home_log
    mode: single
  - id: "1595678900779"
    alias: "Kitchen: Freezer Door Closed"
    description: ""
    trigger:
      - entity_id: binary_sensor.freezer_door
        from: "on"
        platform: state
        to: "off"
    condition: []
    action:
      - data:
          message: ":snowflake: Freezer :door: door closed."
          title: ":cook: Kitchen"
        service: script.send_to_home_log
    mode: single
  - id: "1595679010796"
    alias: "Kitchen: Freezer Open For A Long Period Of Time"
    description: ""
    trigger:
      - entity_id: binary_sensor.freezer_door
        for: 00:04:00
        from: "off"
        platform: state
        to: "on"
    condition: []
    action:
      - service: script.send_to_home_log
        data:
          message: >-
            Freezer door is open.
            Reloading Smartthings integration to see if the sensor lagged out.
          title: ":cook: Kitchen"
      - service: rest_command.reload_smartthings
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - if:
          - condition: state
            entity_id: binary_sensor.freezer_door
            state: "on"
        then:
          - parallel:
              - service: script.send_direct_notification
                data:
                  message: ":snowflake: Freezer :door: door has been open for more than 4 minutes!"
                  title: ":warning: :cook: Kitchen :warning:"
    mode: single
  - id: "1657801925107"
    alias: "Kitchen: Fridge Plug Turned Off"
    description: ""
    trigger:
      - platform: state
        entity_id:
          - switch.fridge_freezer
        to: "off"
        for:
          hours: 0
          minutes: 1
          seconds: 0
    condition: []
    action:
      - parallel:
          - service: script.send_to_home_log
            data:
              message: Fridge Freezer plug is turned off.
              title: ":cook: Kitchen"
          - service: script.send_actionable_notification_with_2_buttons
            data:
              message: Fridge Freezer plug is turned off. Turn on?
              title: ":cook: Kitchen"
              people:
                - person.danny
              action1_title: "Yes"
              action1_name: switch_on_fridge_freezer
              action2_title: "No"
              action2_name: ignore
    mode: single

scene:
  - id: "1629659728757"
    name: Kitchen Main Lights Dim
    icon: "mdi:lightbulb-spot"
    entities:
      light.kitchen_left:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Left
        supported_features: 35
        state: "on"
      light.kitchen_left_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Left 2
        supported_features: 35
        state: "on"
      light.kitchen_middle:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Middle
        supported_features: 35
        state: "on"
      light.kitchen_middle_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Middle 2
        supported_features: 35
        state: "on"
      light.kitchen_right:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Right
        supported_features: 35
        state: "on"
      light.kitchen_right_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 13
        color_temp: 369
        friendly_name: Kitchen Right 2
        supported_features: 35
        state: "on"
  - id: "kitchen_main_lights_off"
    name: Kitchen Main Lights Off
    icon: "mdi:lightbulb-spot-off"
    entities:
      light.kitchen_left:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Left
        supported_features: 35
        state: "off"
      light.kitchen_left_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Left 2
        supported_features: 35
        state: "off"
      light.kitchen_middle:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Middle
        supported_features: 35
        state: "off"
      light.kitchen_middle_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Middle 2
        supported_features: 35
        state: "off"
      light.kitchen_right:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Right
        supported_features: 35
        state: "off"
      light.kitchen_right_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Right 2
        supported_features: 35
        state: "off"
  - id: "1582659847427"
    name: Kitchen Lights Off
    icon: "mdi:lightbulb-spot-off"
    entities:
      light.kitchen_down_light:
        min_mireds: 153
        max_mireds: 65535
        effect_list:
          - colorloop
          - random
        supported_color_modes:
          - color_temp
          - hs
        color_mode: color_temp
        brightness: 52
        color_temp: 42964
        effect: none
        friendly_name: Kitchen Down Light
        supported_features: 63
        icon: mdi:led-strip-variant
        state: "on"
      light.kitchen_cabinet_light:
        min_mireds: 153
        max_mireds: 65535
        effect_list:
          - colorloop
          - random
        supported_color_modes:
          - color_temp
          - hs
        friendly_name: Kitchen Cabinet Light
        supported_features: 63
        icon: mdi:led-strip-variant
        state: "off"
      light.kitchen_drawers:
        min_mireds: 155
        max_mireds: 495
        effect_list:
          - colorloop
          - random
        supported_color_modes:
          - color_temp
          - hs
        friendly_name: Kitchen Draws
        supported_features: 63
        icon: mdi:led-strip-variant
        state: "off"
      light.kitchen_left:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Left
        supported_features: 35
        state: "off"
      light.kitchen_middle:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Middle
        supported_features: 35
        state: "off"
      light.kitchen_right:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Right
        supported_features: 35
        state: "off"
      light.kitchen_left_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Left 2
        supported_features: 35
        state: "off"
      light.kitchen_middle_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Middle 2
        supported_features: 35
        state: "off"
      light.kitchen_right_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        friendly_name: Kitchen Right 2
        supported_features: 35
        state: "off"
  - id: kitchen_side_lights_on
    name: Kitchen Side Lights On
    icon: mdi:led-strip-variant
    entities:
      light.kitchen_down_light:
        min_mireds: 153
        max_mireds: 500
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 255
        hs_color:
          - 36.568
          - 66.275
        rgb_color:
          - 255
          - 189
          - 86
        xy_color:
          - 0.5018
          - 0.4152
        mode: normal
        dynamics: none
        friendly_name: Kitchen Down Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
      light.kitchen_drawers:
        min_mireds: 155
        max_mireds: 495
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 254
        hs_color:
          - 24.878
          - 64.314
        rgb_color:
          - 255
          - 159
          - 91
        xy_color:
          - 0.534
          - 0.376
        mode: normal
        dynamics: none
        friendly_name: Kitchen Draws
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
      light.kitchen_cabinet_light:
        min_mireds: 153
        max_mireds: 500
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 255
        hs_color:
          - 36.568
          - 66.275
        rgb_color:
          - 255
          - 189
          - 86
        xy_color:
          - 0.5018
          - 0.4152
        mode: normal
        dynamics: none
        friendly_name: Kitchen Cabinet Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
  - id: "1606157928636"
    name: Kitchen Dim Side Lights
    icon: mdi:led-strip-variant
    entities:
      light.kitchen_drawers:
        min_mireds: 155
        max_mireds: 495
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 26
        hs_color:
          - 24.878
          - 64.314
        rgb_color:
          - 255
          - 159
          - 91
        xy_color:
          - 0.534
          - 0.376
        mode: normal
        dynamics: none
        friendly_name: Kitchen Draws
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
      light.kitchen_cabinet_light:
        min_mireds: 153
        max_mireds: 500
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 26
        hs_color:
          - 36.568
          - 66.275
        rgb_color:
          - 255
          - 189
          - 86
        xy_color:
          - 0.5018
          - 0.4152
        mode: normal
        dynamics: none
        friendly_name: Kitchen Cabinet Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
      light.kitchen_down_light:
        min_mireds: 153
        max_mireds: 500
        supported_color_modes:
          - color_temp
          - xy
        color_mode: xy
        brightness: 26
        hs_color:
          - 36.568
          - 66.275
        rgb_color:
          - 255
          - 189
          - 86
        xy_color:
          - 0.5018
          - 0.4152
        mode: normal
        dynamics: none
        friendly_name: Kitchen Down Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "on"
  - id: "1613560870965"
    name: "Kitchen: Front Door Open Notification"
    entities:
      light.kitchen_down_light:
        min_mireds: 153
        max_mireds: 65535
        effect_list:
          - colorloop
          - random
        brightness: 128
        hs_color:
          - 242.588
          - 100
        rgb_color:
          - 10
          - 0
          - 255
        xy_color:
          - 0.137
          - 0.041
        effect: none
        friendly_name: Kitchen Down Light
        icon: mdi:string-lights
        supported_features: 63
        state: "on"
  - id: "1629659622092"
    name: Kitchen Main Lights On
    icon: "mdi:lightbulb-spot"
    entities:
      light.kitchen_left:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Left
        supported_features: 35
        state: "on"
      light.kitchen_left_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Left 2
        supported_features: 35
        state: "on"
      light.kitchen_middle:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Middle
        supported_features: 35
        state: "on"
      light.kitchen_middle_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Middle 2
        supported_features: 35
        state: "on"
      light.kitchen_right:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Right
        supported_features: 35
        state: "on"
      light.kitchen_right_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Right 2
        supported_features: 35
        state: "on"
  - id: "1655595690300"
    name: Kitchen Side Lights Off
    icon: "mdi:lightbulb-spot-off"
    entities:
      light.kitchen_cabinet_light:
        min_mireds: 0
        max_mireds: 65535
        supported_color_modes:
          - color_temp
          - xy
        mode: normal
        dynamics: none
        friendly_name: Kitchen Cabinet Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "off"
      light.kitchen_down_light:
        min_mireds: 0
        max_mireds: 65535
        supported_color_modes:
          - color_temp
          - xy
        mode: normal
        dynamics: none
        friendly_name: Kitchen Down Light
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "off"
      light.kitchen_drawers:
        min_mireds: 155
        max_mireds: 495
        supported_color_modes:
          - color_temp
          - xy
        mode: normal
        dynamics: none
        friendly_name: Kitchen Draws
        supported_features: 40
        icon: mdi:led-strip-variant
        state: "off"
  - id: "1629659622093"
    name: Kitchen Table Lights On
    icon: "mdi:lightbulb-spot"
    entities:
      light.kitchen_left:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Left
        supported_features: 35
        state: "on"
      light.kitchen_middle:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Middle
        supported_features: 35
        state: "on"
      light.kitchen_right:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Right
        supported_features: 35
        state: "on"
  - id: "1629659622094"
    name: Kitchen Cooker Lights On
    icon: "mdi:lightbulb-spot"
    entities:
      light.kitchen_left_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Left 2
        supported_features: 35
        state: "on"
      light.kitchen_middle_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Middle 2
        supported_features: 35
        state: "on"
      light.kitchen_right_2:
        min_mireds: 111
        max_mireds: 500
        supported_color_modes:
          - color_temp
        color_mode: color_temp
        brightness: 245
        color_temp: 369
        friendly_name: Kitchen Right 2
        supported_features: 35
        state: "on"

script:
  kitchen_turn_off_camera:
    alias: Kitchen Turn Off Camera
    icon: mdi:cctv-off
    sequence:
      - service: script.send_to_home_log
        data:
          message: "Turning kitchen :camera: camera detection off."
      - service: switch.turn_off
        target:
          entity_id:
            - switch.kitchen_detect
            - switch.kitchen_snapshots
    mode: single
  kitchen_turn_on_camera:
    alias: Kitchen Turn On Camera
    icon: mdi:cctv
    sequence:
      - service: switch.turn_on
        target:
          entity_id:
            - switch.kitchen_detect
            - switch.kitchen_snapshots
    mode: single

template:
  - binary_sensor:
      - name: Dishwasher Powered On
        unique_id: 63be053e-e80c-4b19-b6a4-32ec1405bb8f
        icon: "mdi:dishwasher{{ '' if states('sensor.dishwasher_power') | float(0) >= 10 else '-off' }}"
        device_class: running
        state: "{{ states('sensor.dishwasher_power') | float(0) >= 10 }}"
