# Created by Danny Tsang <danny@tsang.uk>
# Date and Time
- platform: time_date
  display_options:
    - "time"
    - "date"
    - "date_time"
    - "date_time_iso"
    - "time_date"
# Travis CI build status
- platform: rest
  resource: !secret travis_ci_url
  headers:
    Accept: application/vnd.travis-ci.2+json
    Authorization: !secret travis_ci_token
    Travis-API-Version: 3
  value_template: "{{ value_json.builds[0].state }}"
  name: "Travis CI Build Status"
# All sensor configurations
- platform: systemmonitor
  resources:
    - type: disk_use_percent
      arg: /home
    - type: memory_free
    - type: last_boot
    - type: load_1m
    - type: load_5m
    - type: load_15m
- platform: bitcoin
  display_options:
    - exchangerate
    - market_price_usd
# RESTful integration
# Toggl
- platform: rest
  name: Toggl Current Timer
  authentication: basic
  username: !secret toggl
  password: api_token
  value_template: "{{ value_json.data.description }}"
  json_attributes:
    - data
  resource: https://api.track.toggl.com/api/v8/time_entries/current
# Template sensors
- platform: template
  sensors:
    tv_plug_current_w:
      value_template: "{{ state_attr('switch.tv_plug','current_power_w') | float }}"
      friendly_name: "TV current power"
      unit_of_measurement: "Wh"
      icon_template: mdi:flash
    sky_plug_current_w:
      value_template: "{{ state_attr('switch.sky_plug','current_power_w') | float }}"
      friendly_name: "Sky current power"
      unit_of_measurement: "Wh"
      icon_template: mdi:flash
    # Toggl
    toggl_current_timer_start_time:
      value_template: "{{ state_attr('sensor.toggl_current_timer', 'start')['start'] }}"
      device_class: timestamp
