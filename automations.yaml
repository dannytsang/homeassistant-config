- id: "1581867286886"
  alias: "People: Danny Arrives Home And It's Dark"
  description: ""
  trigger:
    - entity_id: person.danny
      from: not_home
      platform: state
      to: home
  condition:
    - condition: state
      entity_id: input_boolean.enable_home_presence_detection
      state: "on"
    - condition: numeric_state
      entity_id: sensor.lounge_motion_light_level
      below: "55"
  action:
    - scene: scene.lounge_lights
    - scene: scene.kitchen_lights_on_2
    - data:
        message:
          ":crescent_moon: :house: :running: :bulb: Danny arrived home and it's
          dark so turning on the lights."
      service: script.post_to_home_log
  mode: single
- id: "1582406380123"
  alias: Turn Off Downstairs Lights at 2am
  description: ""
  trigger:
    - at: 02:00:00
      platform: time
  condition: []
  action:
    - scene: scene.turn_off_downstairs_lights
- id: "1582456019025"
  alias: Turn Off House When Danny Leaves
  description: ""
  trigger:
    - entity_id: person.danny
      from: home
      platform: state
      to: not_home
  condition:
    - condition: state
      entity_id: person.terina
      state: not_home
  action:
    - scene: scene.turn_off_downstairs_lights
    - scene: scene.office_lights_off
    - data:
        message:
          "':running: :house: Danny has left the house and no one is home. Turning
          off lights.'"
      service: script.post_to_home_log
- id: "1582456025977"
  alias: Turn Off Lights When Terina Leaves
  description: ""
  trigger:
    - entity_id: person.terina
      from: home
      platform: state
      to: not_home
  condition:
    - condition: state
      entity_id: person.danny
      state: not_home
  action:
    - scene: scene.turn_off_downstairs_lights
    - scene: scene.office_lights_off
    - data:
        message:
          ":house: :dancer: Terina has left the house and no one is home. Turning
          off lights."
      service: script.post_to_home_log
- id: "1582754128581"
  alias: Terina Arrives Home
  description: ""
  trigger:
    - entity_id: person.terina
      from: not_home
      platform: state
      to: home
  condition:
    - condition: template
      value_template:
        '{{ state_attr("sensor.lounge_motion_light_level","lightlevel")
        < 55 }}'
  action:
    - scene: scene.lounge_lights
    - scene: scene.kitchen_lights_on_2
    - data:
        message:
          ":crescent_moon: :dancer: :house: :bulb: Terina arrived home and its
          dark so turning on the lights."
      service: script.post_to_home_log
- id: "1582754236859"
  alias: "Downstairs: Turn On Lights At Night When Terina Is Home"
  description: ""
  trigger:
    - platform: template
      value_template:
        '{{ state_attr("sensor.conservatory_motion_sensor_light_level","dark")
        == True }}'
  condition:
    - condition: state
      entity_id: person.terina
      state: home
  action:
    - scene: scene.lounge_lights
    - scene: scene.kitchen_lights_on_2
- id: "1584055822251"
  alias: "Qnap: offline"
  description: ""
  trigger:
    - entity_id: device_tracker.qnap
      for: 00:05:00
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
  action:
    - data:
        message: ":warning: QNAP is offline! :warning:"
      service: script.post_to_home_log
- id: "1584089698583"
  alias: "Doorbell: Lower Battery"
  description: ""
  trigger:
    - entity_id: sensor.front_doorbell_battery
      platform: state
      to: "10"
  condition: []
  action:
    - data:
        message: ":warning: :battery: Conservatory motion sensor is low on battery"
      service: script.post_to_home_log
  mode: single
- id: "1584089831265"
  alias: "Doorbell: Critically Low On Battery"
  description: ""
  trigger:
    - entity_id: sensor.front_doorbell_battery
      platform: state
      to: "5"
  condition: []
  action:
    - data:
        message:
          ":warning: :battery: Conservatory motion sensor is critically low on
          battery"
      service: script.post_to_home_log
  mode: single
- id: "1584277767373"
  alias: "Office: No Motion Detected And Computer Is Off"
  description: ""
  trigger:
    - entity_id: group.office_motion
      for: 00:06:00
      platform: state
      to: "off"
    - platform: state
      entity_id: input_boolean.enable_office_motion_trigger
      to: "on"
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: group.jd_computer
          state: not_home
  action:
    - data:
        message:
          ":no_pedestrians: :bulb: No motion detected in the office for 6 minutes
          and :computer: is not connected. Turning office and desk lights off."
      service: script.post_to_home_log
    - scene: scene.office_turn_off_all_lights
  mode: single
- id: "1587044886886"
  alias: "Office: No Motion Detected And Computer Is On"
  description: ""
  trigger:
    - entity_id: group.office_motion
      for: 00:10:00
      platform: state
      to: "off"
  condition:
    - condition: state
      entity_id: input_boolean.enable_office_motion_trigger
      state: "on"
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: No motion detected in the office for 10 minutes and
          :computer: is connected. Turning office light off."
    - scene: scene.office_main_light_off
  mode: single
- id: "1587806619052"
  alias: "Alarm: Arm Overnight No One Home"
  description: ""
  trigger:
    - at: 01:00:00
      platform: time
  condition:
    - condition: state
      entity_id: person.danny
      state: not_home
    - condition: state
      entity_id: person.terina
      state: not_home
    - condition: state
      entity_id: binary_sensor.conservatory_door
      state: "off"
  action:
    - code: ""
      device_id: e5359a77b14b405781335a01c70d8d66
      domain: alarm_control_panel
      entity_id: alarm_control_panel.stevenage_alarm
      type: arm_away
    - data:
        message:
          ":running: :dancer: are away. Turning alarm on in away mode :bell:
          :house:"
      service: script.post_to_home_log
  mode: single
- id: "1587833877434"
  alias: "Conservatory: Door Open At Night"
  description: ""
  trigger:
    - event: sunset
      platform: sun
  condition:
    - condition: state
      entity_id: binary_sensor.conservatory_door
      state: "on"
  action:
    - data:
        message: "Conservatory :door: is on open and it's dark :full_moon:"
      service: script.post_to_home_log
- id: "1588199006400"
  alias: "Bedroom: Remote Low Battery"
  description: ""
  trigger:
    - entity_id: sensor.bedroom_dimmer_switch_battery_level
      platform: state
      to: "10"
  condition: []
  action:
    - data:
        message: ":warning: :battery: Bedroom remote is low on battery"
      service: script.post_to_home_log
- id: "1588199110995"
  alias: "Bedroom: Remote Critically Low Battery"
  description: ""
  trigger:
    - entity_id: sensor.bedroom_dimmer_switch_battery_level
      platform: state
      to: "5"
  condition: []
  action:
    - data:
        message: ":warning: :battery: Bedroom remote is critically low on battery"
      service: script.post_to_home_log
- id: "1588609147280"
  alias: "People: Someone Arrives Home"
  description: ""
  trigger:
    - entity_id: group.all_people
      from: not_home
      platform: state
      to: home
  condition:
    - condition: state
      entity_id: alarm_control_panel.stevenage_alarm
      state: armed_away
  action:
    - data: {}
      entity_id: alarm_control_panel.stevenage_alarm
      service: script.1589652888991
- id: "1589026420341"
  alias: "Alarm: Triggered"
  description: ""
  trigger:
    - entity_id: alarm_control_panel.stevenage_alarm
      platform: state
      to: burglar-alarm
  condition: []
  action:
    - condition: state
      entity_id: input_boolean.enable_slack_notifications
      state: "on"
    - data:
        data:
          attachments:
            - color: "#a51018"
              fields:
                - short: false
                  title: Priority
                  value: High
              text: Ring alarm has been triggered
              title: ":warning: :bell: :mega:"
        message: "@danny @terina"
        target: "#home_log #general"
      service: notify.slack_notify
  mode: single
- id: "1589654262959"
  alias: "Office: Chromecast Offline"
  description: ""
  trigger:
    - entity_id: device_tracker.chromecast_ultra
      for: 00:05:00
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
  action:
    - data:
        message: ":warning: Office Chromecast is offline! :warning:"
      service: script.post_to_home_log
- id: "1589654316361"
  alias: "Bedroom: Chromecast Offline"
  description: ""
  trigger:
    - entity_id: device_tracker.chromecast_bedroom
      for: 00:05:00
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
  action:
    - data:
        message: ":warning: Bedroom Chromecast is offline! :warning:"
      service: script.post_to_home_log
- id: "1589654392712"
  alias: "Utility: Unifi AP Offline"
  description: ""
  trigger:
    - entity_id: device_tracker.utility
      for: 00:05:00
      from: home
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
  action:
    - data:
        message: ":warning: Utility wireless access point is offline! :warning:"
      service: script.post_to_home_log
- id: "1589654509374"
  alias: "Lounge: Unifi AP Offline"
  description: ""
  trigger:
    - entity_id: device_tracker.lounge
      for: 00:05:00
      from: home
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
  action:
    - data:
        message: ":warning: Lounge wireless access point is offline! :warning:"
      service: script.post_to_home_log
- id: "1589654825847"
  alias: "Qnap: Online"
  description: ""
  trigger:
    - entity_id: device_tracker.qnap
      from: not_home
      platform: state
      to: home
  condition: []
  action:
    - data:
        message: "Qnap is online! target: "
      service: script.post_to_home_log
- id: "1590564041899"
  alias: "Lounge: UPS On Battery"
  description: ""
  trigger:
    - entity_id: sensor.lounge_ups_status_data
      platform: state
      to: OB DISCHRG
  condition: []
  action:
    - data:
        message: ":warning: :battery: Lounge UPS is running on battery :battery: :warning:"
      service: script.post_to_home_log
    - data:
        message:
          ":warning: :battery: Lounge UPS is running on battery mins left :battery:
          :warning:"
      service: script.post_to_direct_notification
  mode: single
- id: "1590564595890"
  alias: "Lounge: UPS Below 5 Minutes Run time"
  description: ""
  trigger:
    - below: "301"
      entity_id: sensor.lounge_ups_battery_runtime
      platform: numeric_state
  condition:
    - condition: state
      entity_id: sensor.lounge_ups_status_data
      state: OB DISCHRG
  action:
    - data:
        message:
          ":warning: :battery: Lounge UPS battery has less than 5 minutes left
          :battery: :warning:"
      service: script.post_to_home_log
    - data:
        message:
          ":warning: :battery: Lounge UPS battery has less than 5 minutes left
          :battery: :warning:"
      service: script.post_to_direct_notification
  mode: single
- id: "1591041613690"
  alias: "Stairs: Motion Detected And Lounge Is Dark"
  description: ""
  trigger:
    - entity_id: binary_sensor.stairs_motion
      platform: state
      to: "on"
  condition:
    - condition: and
      conditions:
        - below: "26"
          condition: numeric_state
          entity_id: sensor.lounge_motion_light_level
        - condition: or
          conditions:
            - condition: state
              entity_id: light.lounge_left_lamp
              state: "off"
            - condition: state
              entity_id: light.lounge_right_lamp
              state: "off"
        - condition: state
          entity_id: input_boolean.enable_stairs_motion_trigger
          state: "on"
  action:
    - scene: scene.lounge_lights
    - data:
        message:
          ":feet: :bulb: Motion detected on the stairs. Turning lounge lights
          on"
      service: script.post_to_home_log
  mode: single
- id: "1591553714916"
  alias: "Lounge: UPS Fully Charged"
  description: ""
  trigger:
    - entity_id: sensor.lounge_ups_status_data
      from: OL CHRG
      platform: state
      to: OL
  condition: []
  action:
    - data:
        message: ":battery: :thumbsup: Lounge UPS battery is fully charged."
      service: script.post_to_home_log
- id: "1591553945554"
  alias: "MagicMirror: Turn Off If No Montion At Night"
  description: ""
  trigger:
    - entity_id: binary_sensor.stairs_motion
      for: 00:05:00
      platform: state
      to: "off"
  condition:
    - after: "23:00"
      before: "5:00"
      condition: time
    - condition: state
      entity_id: switch.magic_mirror_screen
      state: "on"
    - condition: state
      entity_id: input_boolean.enable_magic_mirror_automations
      state: "on"
  action:
    - type: turn_off
      device_id: 8dece5066db945139d9c8f3b2b8a5314
      entity_id: switch.magic_mirror_screen
      domain: switch
    - data:
        message:
          ":clock11: :no_pedestrians: :mirror: Turning off Maggic Mirror because
          no motion was detected."
      service: script.post_to_home_log
  mode: single
- id: "1591705427768"
  alias: "Office: Server UPS On Battery"
  description: ""
  trigger:
    - entity_id: sensor.server_ups_status_data
      platform: state
      to: OB DISCHRG
  condition: []
  action:
    - data:
        message:
          ":warning: :battery: Server UPS is running on battery with less than
          5 minutes left :battery: :warning:"
        target: "#general"
      service: notify.slack_notify
    - data:
        message:
          ":warning: :battery: Server UPS is running on battery with less than
          5 minutes left :battery: :warning:"
      service: script.post_to_direct_notification
  mode: single
- id: "1591705795121"
  alias: "Office: Server UPS On Battery With Less Than 5 Minutes"
  description: ""
  trigger:
    - below: "301"
      entity_id: sensor.server_ups_battery_runtime
      platform: numeric_state
  condition:
    - condition: state
      entity_id: sensor.server_ups_status_data
      state: OB DISCHRG
  action:
    - data:
        message:
          ":warning: :battery: Server UPS battery has less than 5 minutes left
          :battery: :warning:"
      service: script.post_to_home_log
    - data:
        message:
          ":warning: :battery: Server UPS battery has less than 5 minutes left
          :battery: :warning:"
        target: "#general"
      service: script.post_to_direct_notification
  mode: single
- id: "1591729661691"
  alias: "Office: UPS Fully Charged"
  description: ""
  trigger:
    - entity_id: sensor.server_ups_status_data
      from: OL CHRG
      platform: state
      to: OL
  condition: []
  action:
    - data:
        message: ":battery: :thumbsup: Server UPS battery is fully charged."
      service: script.post_to_home_log
  mode: single
- id: "1591963855737"
  alias: "Lounge: UPS Unavailable"
  description: ""
  trigger:
    - entity_id: sensor.lounge_ups_status_data
      platform: state
      to: unavailable
  condition: []
  action:
    - data:
        message:
          ":warning: :battery: Lounge UPS battery is not connected :battery:
          :warning:"
      service: script.post_to_home_log
- id: "1591963905748"
  alias: "Office: UPS Unavailable"
  description: ""
  trigger:
    - entity_id: sensor.server_ups_status_data
      platform: state
      to: unavailable
  condition: []
  action:
    - data:
        message:
          ":warning: :battery: Server UPS battery is not connected :battery:
          :warning:"
      service: script.post_to_home_log
  mode: single
- id: "1594146384568"
  alias: "Conservatory: Water Detected"
  description: ""
  trigger:
    - entity_id: binary_sensor.conservatory_water
      platform: state
      to: "on"
  condition: []
  action:
    - data:
        message: ":warning: :droplet: Water detected in the conservatory :droplet: :warning:"
      service: script.post_to_home_log
- id: "1594148554582"
  alias: "Conservatory: Water Not Detected"
  description: ""
  trigger:
    - entity_id: binary_sensor.conservatory_water
      from: "on"
      platform: state
      to: "off"
  condition: []
  action:
    - data:
        message: Water no longer detected in the conservatory
      service: script.post_to_home_log
- id: "1594554327310"
  alias: "People: Everyone Left And House Is Not Locked"
  description: ""
  trigger:
    - entity_id: group.all_people
      for: 00:02:00
      platform: state
      to: not_home
  condition:
    - condition: template
      value_template:
        '{{ not is_state("device_tracker.unifi_security_gateway", "unavailable")
        }}'
    - condition: state
      entity_id: group.alarmed_doors_and_windows
      state: "on"
    - condition: state
      entity_id: input_boolean.enable_home_presence_detection
      state: "on"
  action:
    - data:
        message:
          ":warning: :door: :unlock: No one is home and not all the doors / windows
          are closed."
        title: No one is home
      service: script.post_to_direct_notification
    - data:
        message:
          ":warning: :door: :unlock: No one is home and not all the doors / windows
          are closed."
      service: script.post_to_home_log
  mode: single
- id: "1595678795894"
  alias: "Utility: Freezer Door Open"
  description: ""
  trigger:
    - entity_id: binary_sensor.freezer_contact
      from: "off"
      platform: state
      to: "on"
  condition: []
  action:
    - data:
        message: ":door: :snowflake: Freezer door is open"
      service: script.post_to_home_log
  mode: single
- id: "1595678900777"
  alias: "Utility: Freezer Door Closed"
  description: ""
  trigger:
    - entity_id: binary_sensor.freezer_contact
      from: "on"
      platform: state
      to: "off"
  condition: []
  action:
    - data:
        message: ":door: :snowflake: Freezer door closed"
      service: script.post_to_home_log
  mode: single
- id: "1595679010792"
  alias: "Utility: Freezer Open For A Long Period Of Time"
  description: ""
  trigger:
    - entity_id: binary_sensor.freezer_contact
      for: 00:04:00
      from: "off"
      platform: state
      to: "on"
  condition: []
  action:
    - data:
        message:
          ":warning: :door: :snowflake: @danny @terina Freezer door has been
          open for more than 4 minutes!"
        target: general
      service: notify.slack_notify
    - data:
        message:
          ":warning: :door: :snowflake: Freezer door has been open for more than
          4 minutes!"
      service: script.post_to_home_log
  mode: single
- id: "1596190251094"
  alias: "Office: Turn Fan Off After 1 Hour"
  description: ""
  trigger:
    - entity_id: switch.office_fan
      for: 01:00:00
      from: "off"
      platform: state
      to: "on"
  condition: []
  action:
    - device_id: 6670051512fe44daa725f099f661e23c
      domain: switch
      entity_id: switch.office_fan
      type: turn_off
    - data:
        message: Turned off office Fan after 1 hour.
      service: script.post_to_home_log
  mode: single
- id: "1600719083284"
  alias: Test2
  description: ""
  trigger:
    - platform: time
      at: "12:00:00"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: testing testing
  mode: single
- id: "1601146277582"
  alias: "Bedroom: Watching TV During The Day"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: switch.bedroom_tv_plug
      attribute: current_power_w
      above: "20"
      for: 00:01:00
  condition:
    - condition: numeric_state
      entity_id: sensor.bedroom_motion_light_level
      above: "20"
    - condition: sun
      before: sunset
      after: sunrise
    - condition: state
      entity_id: cover.bedroom_blind
      state: open
    - condition: state
      entity_id: binary_sensor.bathroom_window
      state: "off"
  action:
    - device_id: e5a40dac52c048169af0a3120fd75346
      domain: cover
      entity_id: cover.bedroom_blind
      type: set_position
      position: 0
    - service: script.post_to_home_log
      data:
        title: ":sunny: :tv:"
        message:
          ":sunny: :tv: TV turned on, window is closed and it's bright. Closing
          bedroom blinds."
  mode: single
- id: "1603568714170"
  alias: "Test: IFTTT Test"
  description: ""
  trigger:
    - platform: event
      event_type: ifttt_webhook_received
      event_data:
        action: ifttt_test
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: IFTTT test successful
  mode: single
- id: "1604998439600"
  alias: "House: Water detected"
  description: ""
  trigger:
    - platform: state
      entity_id: group.water_sensors
      to: "on"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: ":warning: :droplet: Potential leak detected :droplet: :warning:"
  mode: single
- id: "1604998512525"
  alias: "House: Water Not Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: group.water_sensors
      from: "on"
      to: "off"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: Potential leak has stopped
  mode: single
- id: "1605924680077"
  alias: "Ashlee's Room: Turn Off Night Light At Sunrise"
  description: ""
  trigger:
    - platform: sun
      event: sunrise
  condition:
    - condition: state
      entity_id: switch.night_light
      state: "on"
  action:
    - type: turn_off
      device_id: 55432b61c333477b84f972603e84e798
      entity_id: switch.night_light
      domain: switch
    - service: script.post_to_home_log
      data:
        message: :sunrise:. Turn off night light
  mode: single
- id: "1606170045630"
  alias: "Lounge: No Motion After 5 Minutes"
  description: ""
  trigger:
    - platform: state
      entity_id: group.lounge_motion
      to: "off"
      for: 00:05:00
  condition:
    - condition: state
      entity_id: input_boolean.enable_lounge_motion_trigger
      state: "on"
    - condition: numeric_state
      entity_id: switch.tv_plug
      attribute: current_power_w
      below: "10"
  action:
    - scene: scene.lounge_dim_lights
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: :bulb: :low_brightness: No motion detected and TV
          is turned off in the lounge for 5 minutes. Dimming lights"
  mode: single
- id: "1606256309890"
  alias: "Office: Computer Turned Off"
  description: ""
  trigger:
    - platform: state
      entity_id: group.jd_computer
      for: 00:10:00
      to: not_home
      from: home
  condition:
    - condition: not
      conditions:
        - condition: state
          entity_id: device_tracker.unifi_security_gateway
          state: unavailable
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":computer: :tv: Computer turned off for more than 10 minutes. Consider
          turning monitor off."
    - scene: scene.office_turn_off_desk_light
    - service: script.post_to_home_log
      data:
        message:
          ":computer: :tv: Computer turned off for more than 10 minutes. Turned
          off desk lights."
  mode: single
- id: "1606294735952"
  alias: "Kitchen: Turn Off Lights Weekend Morning"
  description: ""
  trigger:
    - platform: time
      at: 09:00:00
  condition:
    - condition: time
      weekday:
        - sat
        - sun
  action:
    - device_id: 7bb3a37c66e143368cdc7b5a27a8a155
      domain: light
      entity_id: light.kitchen_down_light
      type: turn_off
    - device_id: 902ae097a4f84ef1a73d1b078600b02d
      domain: light
      entity_id: light.kitchen_cabinet_light
      type: turn_off
    - data:
        message: ':clock{{ now().strftime("%H")}}: :bulb: Turning off kitchen lights'
      service: script.post_to_home_log
  mode: single
- id: "1606652871369"
  alias: "Kitchen: No Motion During Day"
  description: ""
  trigger:
    - platform: state
      to: "off"
      for: 00:05:00
      entity_id: group.kitchen_motion
  condition:
    - condition: and
      conditions:
        - condition: sun
          before: sunset
        - condition: time
          after: "23:30:00"
  action:
    - scene: scene.kitchen_lights_on_3
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: No motion detected after :city_sunrise: and before
          :city_sunset: Turning kitchen lights off (1)."
  mode: single
- id: "1608489396143"
  alias: "Home Assistant: Start Up"
  description: ""
  trigger:
    - platform: homeassistant
      event: start
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: "@home_assistant has started."
    - service: script.post_direct_message_to_danny
      data:
        message: Home Assistant has started.
  mode: single
- id: "1608489438291"
  alias: "Home Assistant: Shutdown"
  description: ""
  trigger:
    - platform: homeassistant
      event: shutdown
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: "@home_assistant shuting down."
    - service: script.post_direct_message_to_danny
      data:
        message: Home assistant shutting down.
  mode: single
- id: "1608655560832"
  alias: "3D Printer: Print Started"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.octoprint_printing
      from: "off"
      to: "on"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message:
          ':printer: 3D printer has started. Estimated time to completion: {{((now().strftime("%s")
          | int + (states("sensor.octoprint_time_remaining") | int)) | timestamp_custom("%H:%M:%S"))}}
          ({{ ((((states("sensor.octoprint_time_remaining") | int) / 60) | float) /
          60) | round(2) }} hours).'
  mode: single
- id: "1608655663801"
  alias: "3D Printer: Errored"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.octoprint_printing_error
      from: "off"
      to: "on"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        title: 3D printer error
        message: ":warning: :printer: 3D printer has encountered an error :x: :warning:"
    - service: script.post_direct_message_to_danny
      data:
        title: 3D printer error
        message: ":warning: :printer: 3D printer has encountered an error :x: :warning:"
  mode: single
- id: "1609349959402"
  alias: "3D Printer: Print Finished And Bed Cooled"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: sensor.octoprint_actual_tool0_temp
      below: "50"
  condition: []
  action:
    - service: script.post_direct_message_to_danny
      data:
        title: Print head cooled sufficiently
        message: Print head below 50c
  mode: single
- id: "1609598244704"
  alias: "Kitchen: No Motion During Day 2"
  description: ""
  trigger:
    - platform: state
      to: "off"
      for: 00:05:00
      entity_id: group.kitchen_motion
  condition:
    - condition: and
      conditions:
        - condition: time
          after: 00:00:00
        - condition: sun
          before: sunset
  action:
    - scene: scene.kitchen_lights_on_3
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: No motion detected after :city_sunrise: and before
          :city_sunset: Turning kitchen lights off."
  mode: single
- id: "1610314735644"
  alias: "Bathroom: No Motion Detected And Bathroom Door Is Open 2"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.bathroom_motion
      to: "off"
      for: 00:02:00
  condition:
    - condition: state
      entity_id: light.bathroom_light
      state: "on"
    - condition: state
      entity_id: input_boolean.enable_bathroom_motion_trigger
      state: "on"
    - condition: state
      entity_id: binary_sensor.bathroom_door
      state: "on"
    - condition: state
      entity_id: input_boolean.bathroom_light_override
      state: "off"
  action:
    - scene: scene.bathroom_turn_off_light
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: No motion again and door is open. Turning bathroom
          light off."
  mode: single
- id: "1610388192224"
  alias: "Lounge: TV Turned On"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: switch.tv_plug
      above: "35"
      attribute: current_power_w
  condition: []
  action:
    - service: script.post_direct_message_to_danny
      data:
        message: TV turned on.
  mode: single
- id: "1610388245160"
  alias: "Lounge: TV Turned Off"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: switch.tv_plug
      below: "35"
      attribute: current_power_w
      for: 00:05:00
  condition:
    - condition: state
      entity_id: group.lounge_lights
      state: "on"
    - condition: state
      entity_id: group.lounge_motion
      state: "off"
    - condition: template
      value_template:
        " {{ (as_timestamp(now())-as_timestamp(states.group.lounge_motion.last_updated))
        > 300 }}"
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":bulb: :low_brightness: TV turned off for 5 minutes. Dimming lounge
          lights."
    - scene: scene.lounge_dim_lights
  mode: single
- id: "1610409803685"
  alias: "Lounge: TV Turned Off 2"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: switch.tv_plug
      attribute: current_power_w
      for: 00:10:00
      below: "35"
  condition:
    - condition: state
      entity_id: group.lounge_lights
      state: "on"
    - condition: state
      entity_id: group.lounge_motion
      state: "off"
    - condition: template
      value_template:
        " {{ (as_timestamp(now())-as_timestamp(states.group.lounge_motion.last_updated))
        > 300 }}"
  action:
    - service: script.post_to_home_log
      data:
        message: TV turned off for 10 minutes. Turning lounge lights off.
    - scene: scene.lounge_lights_off
  mode: single
- id: "1610918759041"
  alias: "Lounge: Restart Harmony Hub"
  description: ""
  trigger:
    - platform: time
      at: 03:00:00
  condition:
    - condition: numeric_state
      entity_id: switch.tv_plug
      attribute: current_power_w
      below: "40"
    - condition: time
      weekday:
        - mon
  action:
    - type: turn_off
      device_id: b6132172dbf641938719e0bd3eb92e63
      entity_id: switch.bedroom_tv_plug
      domain: switch
    - service: script.post_to_home_log
      data:
        message: ":TV: Restarting Harmony hub."
    - wait_template: 00:01:00
    - type: turn_on
      device_id: b6132172dbf641938719e0bd3eb92e63
      entity_id: switch.bedroom_tv_plug
      domain: switch
  mode: single
- id: "1611063957341"
  alias: "Lounge: Server Fan Running Longer Than 1 Hour"
  description: ""
  trigger:
    - platform: state
      entity_id: switch.server_fan
      to: "on"
      for: 01:00:00
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message:
          Server fan has been running for more than 1 hour. Consider turning
          Fan off.
    - service: script.post_direct_message_to_danny
      data:
        message:
          Server fan has been running for more than 1 hour. Consider turning
          Fan off.
  mode: single
- id: "1611094285340"
  alias: "Calendar: Terina WFH"
  description: ""
  trigger:
    - platform: state
      entity_id: calendar.family
      attribute: all_day
      to: "on"
  condition:
    - condition: state
      entity_id: calendar.family
      state: Terina WFH
      attribute: message
  action:
    - service: script.post_direct_message_to_danny
      data:
        title: Test Terina WFH
        message: Terina WFH Calendar event.
  mode: single
- id: "1611164672680"
  alias: "Bathroom: Door Closed And It's Dark"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.bathroom_door
      to: "off"
      from: "on"
  condition:
    - condition: state
      entity_id: input_boolean.enable_bathroom_motion_trigger
      state: "on"
    - condition: numeric_state
      entity_id: sensor.bathroom_motion_light_level
      below: "30"
  action:
    - service: script.post_to_home_log
      data:
        message: ":bathtub: :door: Bathroom door closed. Turning lights on."
    - scene: scene.bathroom_light_on
  mode: single
- id: "1611164800136"
  alias: "Bathroom: No Motion Detected And Bathroom Door Is Closed"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.bathroom_motion
      to: "off"
      for: 00:10:00
  condition:
    - condition: state
      entity_id: light.bathroom_light
      state: "on"
    - condition: state
      entity_id: input_boolean.enable_bathroom_motion_trigger
      state: "on"
    - condition: state
      entity_id: binary_sensor.bathroom_door
      state: "off"
  action:
    - scene: scene.bathroom_dim_lights
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: :bathtub: :bulb: :low_brightness: No motion and door
          is closed. Dimming bathroom light."
  mode: single
- id: "1611165055857"
  alias: "Bathroom: No Motion Detected And Bathroom Door Is Closed 2"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.bathroom_motion
      to: "off"
      for: 00:12:00
  condition:
    - condition: state
      entity_id: light.bathroom_light
      state: "on"
    - condition: state
      entity_id: input_boolean.enable_bathroom_motion_trigger
      state: "on"
    - condition: state
      entity_id: binary_sensor.bathroom_door
      state: "off"
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":no_pedestrians: No motion again and door is closed. Turning bathroom
          light off."
    - scene: scene.bathroom_turn_off_light
  mode: single
- id: "1611864051855"
  alias: "Leo's Bedroom: Door Open At Night"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.leos_door
      from: "off"
      to: "on"
  condition:
    - condition: time
      after: 00:00:00
      before: 06:00
  action:
    - service: script.post_to_home_log
      data:
        message: Leo's door open
  mode: single
- id: "1611931052908"
  alias: "Porch: Front Door Open Indicator"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_door
      from: "off"
      to: "on"
  condition:
    - condition: state
      entity_id: group.all_people
      state: home
  action:
    - service: script.post_to_home_log
      data:
        message: "Someone is home, notifying front :door: door is open"
    - service: script.front_door_open_notification
      data: {}
  mode: single
- id: "1611931640441"
  alias: "Porch: Front Door Closed"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_door
      from: "on"
      to: "off"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: ":door: Front door closed."
    - service: script.front_door_closed_notification
      data: {}
  mode: single
- id: "1612997966835"
  alias: "Bedroom: NowTv Playing"
  description: ""
  trigger:
    - platform: state
      entity_id: media_player.nowtv_stick
      to: playing
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":tv: NowTv is playing {{ state_attr('media_player.nowtv_stick',
          'app_name') }}"
  mode: queued
  max: 10
- id: "1613246249488"
  alias: "Office: Computer UPS On Battery"
  description: ""
  trigger:
    - entity_id: sensor.computer_ups_status_data
      platform: state
      to: OB DISCHRG
  condition: []
  action:
    - data:
        message:
          ":warning: :battery: Server UPS is running on battery with less than
          5 minutes left :battery: :warning:"
        target: "#general"
      service: notify.slack_notify
    - data:
        message:
          ":warning: :battery: Server UPS is running on battery with less than
          5 minutes left :battery: :warning:"
      service: script.post_to_direct_notification
  mode: single
- id: "1613246359438"
  alias: "Office: Computer UPS On Battery With Less Than 5 Minutes"
  description: ""
  trigger:
    - below: "301"
      entity_id: sensor.computer_ups_status_data
      platform: numeric_state
  condition:
    - condition: state
      entity_id: sensor.computer_ups_status_data
      state: OB DISCHRG
  action:
    - data:
        message:
          ":warning: :battery: Server UPS battery has less than 5 minutes left
          :battery: :warning:"
      service: script.post_to_home_log
    - data:
        message:
          ":warning: :battery: Server UPS battery has less than 5 minutes left
          :battery: :warning:"
        target: "#general"
      service: script.post_to_direct_notification
  mode: single
- id: "1613264719942"
  alias: "Office: Alarm Armed Home Mode & Motion Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: group.office_motion
      to: "on"
  condition:
    - condition: state
      entity_id: alarm_control_panel.stevenage_alarm
      state: armed_home
    - condition: state
      entity_id: group.jd_computer
      state: "off"
  action:
    - service: script.post_to_home_log
      data:
        message: ":paw_prints: Motioned detected in the office!"
  mode: single
- id: "1613264961246"
  alias: "Kitchen: Alarm Armed Home Mode & Motion Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: group.kitchen_motion
      to: "on"
  condition:
    - condition: state
      entity_id: alarm_control_panel.stevenage_alarm
      state: armed_home
    - condition: state
      entity_id: group.jd_computer
      state: "off"
  action:
    - service: script.post_to_home_log
      data:
        message: ":paw_prints: Motioned detected in the kitchen!"
  mode: single
- id: "1613321560216"
  alias: "3D Printer: Finished Printing"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.octoprint_printing
      from: "on"
      to: "off"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message:
          ':printer: :white_check_mark: Completed 3D printing. Total time: {{
          (((states("sensor.octoprint_time_elapsed") | int) / 60) | float) / 60 }} hours.'
  mode: single
- id: "1613324300208"
  alias: "UPS: Computer UPS Unavailable"
  description: ""
  trigger:
    - platform: state
      entity_id: sensor.computer_ups_status
      to: unavailable
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: PC UPS is offline.
  mode: single
- id: "1613326798324"
  alias: "Bathroom: Door Closed And No Motion For 5 Minutes"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.bathroom_door
      to: "off"
      from: "on"
  condition:
    - condition: state
      entity_id: binary_sensor.bathroom_motion
      state: "off"
      for: 00:05:00
  action:
    - service: script.post_direct_message_to_danny
      data:
        title: Bathroom door closed
        message:
          Bathroom door is closed and there has been no motion for 5 minutes.
          Should the door be open?
  mode: single
- id: "1613333442249"
  alias: "People: No One Home And 3D Printing"
  description: ""
  trigger:
    - platform: state
      entity_id: group.adult_people
      to: not_home
      for: 00:01:00
  condition:
    - condition: not
      conditions:
        - condition: state
          entity_id: sensor.octoprint_time_remaining
          state: unknown
  action:
    - service: script.post_to_direct_notification
      data:
        title: 3D Printing
        message: 3D printer is printing and no one is home.
  mode: single
- id: "1613475468647"
  alias: "Front Garden: Motion Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_garden_motion
      from: "off"
      to: "on"
  condition:
    - condition: time
      before: "19:00"
      after: 09:00
    - condition: state
      entity_id: binary_sensor.front_door
      state: "off"
    - condition: state
      entity_id: group.adult_people
      state: home
  action:
    - service: script.post_direct_message_to_danny
      data:
        title: Front Garden
        message: ":paw_prints: :deciduous_tree: Motion detected in the front garden."
    - service: script.post_to_home_log
      data:
        message: ":paw_prints: :deciduous_tree: Motion detected in the front garden."
  mode: single
- id: "1613482098461"
  alias: "Front Garden: Motion take snapshot"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_garden_motion
      from: "off"
      to: "on"
  condition: []
  action:
    - service: camera.snapshot
      data:
        filename:
          camera/driveway/driveway_{{ now ().year }}_{{ now ().month }}_{{ now
          ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg
      entity_id: camera.driveway
    - service: notify.mobile_app_dannys_phone
      data:
        message: Motion deteched
        data:
          push:
            category: camera
          entity_id: camera.driveway
  mode: single
- id: "1613575217378"
  alias: "Back Garden: Motion Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.back_garden_motion
      from: "off"
      to: "on"
  condition:
    - condition: state
      entity_id: binary_sensor.conservatory_door
      state: "off"
  action:
    - service: notify.mobile_app_dannys_phone
      data:
        title: Back Garden
        message: ":paw_prints: :deciduous_tree: Motion detected in the back garden."
  mode: single
- id: "1613695680298"
  alias: "Bathroom: Light Override Dim"
  description: ""
  trigger:
    - platform: state
      entity_id: input_boolean.bathroom_light_override
      to: "on"
      from: "off"
      for: 00:10:00
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: ":bathtub: :bulb: :low_brightness: Dimming bathroom :bulb: lights."
    - scene: scene.bathroom_dim_lights
  mode: single
- id: "1613695788304"
  alias: "Bathroom: Light Override Turn Off"
  description: ""
  trigger:
    - platform: state
      entity_id: input_boolean.bathroom_light_override
      to: "on"
      for: 00:11:00
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: "Turning :bathtub: bathroom :bulb: light off."
    - scene: scene.bathroom_turn_off_light
    - service: input_boolean.turn_off
      data: {}
      entity_id: input_boolean.bathroom_light_override
  mode: single
- id: "1610238960657"
  alias: "Conservatory: No Motion Turning Lights Off"
  description: ""
  trigger:
    - platform: state
      entity_id: group.conservatory_motion
      to: "off"
      for: 00:01:30
  condition:
    - condition: state
      entity_id: light.conservatory_light
      state: "on"
  action:
    - service: script.post_to_home_log
      data:
        message: ":no_pedestrians: No motion in conservatory. Turning lights off."
    - scene: scene.conservatory_turn_off_light
  mode: single
- id: "1587595659605"
  alias: "Stairs: Dark, Leo's Door Open And Motion Detected"
  description: ""
  trigger:
    - entity_id: binary_sensor.landing_motion
      from: "off"
      platform: state
      to: "on"
  condition:
    - condition: and
      conditions:
        - below: "5"
          condition: numeric_state
          entity_id: sensor.stairs_motion_light_level
        - condition: state
          entity_id: input_boolean.enable_stairs_motion_trigger
          state: "on"
        - after: "19:30:00"
          before: 08:00:00
          condition: time
        - condition: state
          entity_id: binary_sensor.leos_door
          state: "on"
  action:
    - scene: scene.landing_dim_light
    - data:
        message:
          ":feet: :door: :low_brightness: Motion detected on the landing and
          it's dark. Turning stairs lights on 10%"
      service: script.post_to_home_log
  mode: single
- id: "1613866698304"
  alias: "Stairs: Dark, Leo's Door Closed And Motion Detected"
  description: ""
  trigger:
    - entity_id: binary_sensor.landing_motion
      from: "off"
      platform: state
      to: "on"
  condition:
    - condition: and
      conditions:
        - below: "5"
          condition: numeric_state
          entity_id: sensor.stairs_motion_light_level
        - condition: state
          entity_id: input_boolean.enable_stairs_motion_trigger
          state: "on"
        - after: "19:30:00"
          before: "23:59:59"
          condition: time
        - condition: state
          entity_id: binary_sensor.leos_door
          state: "off"
  action:
    - scene: scene.stairs_turn_light_on
    - data:
        message:
          ":feet: :door: :high_brightness: Motion detected on the landing, Leo's
          door is closed and it's dark. Turning stairs lights on."
      service: script.post_to_home_log
  mode: single
- id: "1613923510415"
  alias: "Doorbell: Last Ding State Change"
  description: ""
  trigger:
    - platform: state
      entity_id: sensor.front_door_last_ding
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        title: Door bell State Changed
        message:
    - service: script.post_to_home_log
      data:
        message:
          'answered: {{ state_attr("sensor.front_door_last_ding", "answered")
          }}'
    - service: script.post_to_home_log
      data:
        message:
          'recording_status: {{ state_attr("sensor.front_door_last_ding", "recording_status")
          }}'
    - service: script.post_to_home_log
      data:
        message:
          'category: {{ state_attr("sensor.front_door_last_ding", "category")
          }}'
  mode: single
- id: "1613924044189"
  alias: "Doorbell: Ring"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_door_ding
      from: "off"
      to: "on"
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        title: Ding Dong
        message: ":door: :bell: Someone is has rung the door bell."
    - service: camera.snapshot
      data:
        entity_id: camera.front_door
        filename:
          camera/front_door/front_door_{{ now ().year }}_{{ now ().month }}_{{
          now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg
      entity_id: camera.front_door
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: script.post_to_home_log_with_local_attachments
      data:
        title: Doorbell rung
        message: Mugshot
        filePath:
          camera/front_door/front_door_{{ now ().year }}_{{ now ().month }}_{{
          now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg
  mode: single
- id: "1613955443909"
  alias: "New Stairs: Dark, Leo's Door Closed, After Midnight And Motion Detected"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.stairs_motion
      from: "off"
      to: "on"
  condition:
    - condition: time
      after: 00:00:00
    - below: "5"
      condition: numeric_state
      entity_id: sensor.stairs_motion_light_level
    - condition: state
      entity_id: input_boolean.enable_stairs_motion_trigger
      state: "on"
  action:
    - scene: scene.landing_dim_light
    - data:
        message:
          ":feet: :door: :low_brightness: Motion detected on the landing and
          it's dark. Turning stairs lights on 10%"
      service: script.post_to_home_log
  mode: single
- id: "1614033445487"
  alias: "Porch: Front Door Opened Once For More than 20 seconds"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.front_door
      to: "on"
      from: "off"
      for: 00:00:20
  condition:
    - condition: numeric_state
      entity_id: counter.front_door
      below: "2"
  action:
    - service: script.post_to_home_log
      data:
        message:
          ':door: :abacus: Front door has been opened for more than 20 secs.
          Resetting counter  from {{ states("counter.front_door") }} to 0'
    - service: counter.reset
      data: {}
      entity_id: counter.front_door
- id: "1614197981954"
  alias: "Alarm: Disconnected"
  description: ""
  trigger:
    - platform: state
      entity_id: sensor.stevenage_alarm_info
      to: unavailable
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        title: Alarm Offline
        message: ":warning: :no_bell: Alarm has disconnected from @home_assistanmt :warning:"
  mode: single
- id: "1614285576722"
  alias: Sleep As Android
  description: ""
  trigger:
    - platform: webhook
      webhook_id: sleep_as_android
  condition: []
  action:
    - service: input_text.set_value
      entity_id: input_text.sleep_as_android
      data:
        value: "{{ trigger.json.event }}"
    - service: script.post_to_home_log
      data:
        message: Sleep as Android has changed to {{ trigger.json.event }}
  mode: queued
  max: 10
- id: "1614555883547"
  alias: "Office: Toggle Key Light"
  description: ""
  trigger:
    - platform: webhook
      webhook_id: keylight_toggle
  condition: []
  action:
    - service: script.post_to_home_log
      data:
        message: ":bulb: Toggle Key light"
    - type: toggle
      device_id: 191a49baaec54b6183658470ea6788c3
      entity_id: light.elgato_key_light_left
      domain: light
  mode: single
- id: "1614692626417"
  alias: "Bathroom: Humidity Is High"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: sensor.bathroom_motion_relative_humidity
      above: "54"
      for: 00:01:00
  condition:
    - condition: state
      entity_id: binary_sensor.bathroom_window
      state: "off"
    - condition: state
      entity_id: binary_sensor.bathroom_door
      state: "off"
  action:
    - service: script.post_to_home_log
      data:
        message:
          ":bath: :droplet: :chart_with_upwards_trend: Humidity in the bathroom
          is above 55% with :door:doors and :window:windows closed."
  mode: single
- id: "1588856667889"
  alias: "MagicMirror: Turn Off Based On Time During Weekday"
  description: ""
  trigger:
    - platform: time_pattern
      minutes: /30
  condition:
    - condition: state
      entity_id: binary_sensor.stairs_motion
      state: "off"
    - condition: state
      entity_id: binary_sensor.lounge_motion
      state: "off"
    - condition: state
      entity_id: binary_sensor.landing_motion
      state: "off"
    - condition: time
      after: 09:00:00
      before: "17:30:00"
      weekday:
        - mon
        - tue
        - wed
        - thu
        - fri
    - condition: state
      entity_id: input_boolean.enable_magic_mirror_automations
      state: "on"
  action:
    - type: turn_off
      device_id: 8dece5066db945139d9c8f3b2b8a5314
      entity_id: switch.magic_mirror_screen
      domain: switch
    - data:
        message:
          ":mirror: :timer_clock: Turning off Magic Mirror based on time and
          no motion nearby."
      service: script.post_to_home_log
  mode: single
- id: "1615208851217"
  alias: "Bedroom: One Person In Bed"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: sensor.bed_sensor
      above: "100"
      below: "600"
  condition: []
  action:
    - data:
        title: Close bedroom blinds
        message: ":sleeping_accommodation: One person is in bed"
      service: script.post_to_home_log
  mode: single
- id: "1615209163907"
  alias: "Bedroom: Two People In Bed"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: sensor.bed_sensor
      above: "600"
  condition: []
  action:
    - data:
        title: Close bedroom blinds
        message:
          ":sleeping_accommodation: An extra person got into Bed. There are now
          two people are in bed."
      service: script.post_to_home_log
  mode: single
- id: "1615209203993"
  alias: "Bedroom: Someone Getting Out Of Bed"
  description: ""
  trigger:
    - platform: numeric_state
      entity_id: sensor.bed_sensor
      above: "100"
      below: "600"
  condition: []
  action:
    - data:
        title: Close bedroom blinds
        message: ":sleeping_accommodation: One person got out of bed. One person left."
      service: script.post_to_home_log
  mode: single
- id: "1615209552353"
  alias: "Bedroom: Leo's Bedroom Door Opens Warning"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.leos_door
      from: "off"
      to: "on"
  condition:
    - condition: numeric_state
      entity_id: sensor.bed_sensor
      above: "100"
    - condition: state
      entity_id: group.bedroom_desk_lights
      state: "on"
  action:
    - data:
        title: Close bedroom blinds
        message: ":boy: :door: Leo's door opened and bedroom light is on. Sending warning."
      service: script.post_to_home_log
    - service: script.bedroom_leos_door_opened_notification
  mode: single
- id: "1615211009087"
  alias: "Bedroom: Ashlee's Bedroom Door Opens Warning"
  description: ""
  trigger:
    - platform: state
      entity_id: binary_sensor.ashlees_door
      from: "off"
      to: "on"
  condition:
    - condition: state
      entity_id: group.bedroom_desk_lights
      state: "on"
  action:
    - data:
        title: Close bedroom blinds
        message: ":girl: :door: Ashlee's door opened and bedroom light is on. Sending warning."
      service: script.post_to_home_log
    - service: script.bedroom_ashlees_door_opened_notification
  mode: single
